<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Controlled Release Workflow Guide â€¢ emburden</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Controlled Release Workflow Guide"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">emburden</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="articles/methodology.html">Methodology</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="articles/jss-emburden.html">JSS Package Manuscript</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ericscheier/emburden"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Controlled Release Workflow Guide</h1>
      <small class="dont-index">Source: <a href="https://github.com/ericscheier/emburden/blob/v0.5.10/.github/RELEASE_WORKFLOW.md" class="external-link"><code>.github/RELEASE_WORKFLOW.md</code></a></small>
    </div>

<div id="controlled-release-workflow-guide" class="section level1">

<p>This document explains how the dual-approval controlled release workflow works for the emburden R package.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a></h2>
<p>The controlled release workflow provides a secure, multi-stage process for releasing new versions of the package. It includes <strong>two manual approval gates</strong> to ensure thorough review before publication.</p>
</div>
<div class="section level2">
<h2 id="workflow-architecture">Workflow Architecture<a class="anchor" aria-label="anchor" href="#workflow-architecture"></a></h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRIGGER: Push v* tag                      â”‚
â”‚                  (e.g., git push origin v0.1.0)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAGE 1: VALIDATION (Automatic)                            â”‚
â”‚  âœ“ Version consistency check                                â”‚
â”‚  âœ“ R CMD check (0 errors, 0 warnings)                       â”‚
â”‚  âœ“ Test suite with coverage (â‰¥70%)                          â”‚
â”‚  âœ“ Build package tarball                                    â”‚
â”‚  âœ“ Generate validation report                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¦ GATE 1: PRE-RELEASE REVIEW (Manual Approval Required)   â”‚
â”‚  â†’ Reviewer examines validation report                      â”‚
â”‚  â†’ Approves if all quality checks pass                      â”‚
â”‚  â†’ Environment: "pre-release-review"                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAGE 2: CREATE PRE-RELEASE (Automatic after approval)     â”‚
â”‚  âœ“ Generate release notes from NEWS.md                      â”‚
â”‚  âœ“ Create draft GitHub release                              â”‚
â”‚  âœ“ Upload package tarball                                   â”‚
â”‚  âœ“ Upload validation report                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¦ GATE 2: PRODUCTION RELEASE (Final Approval Required)    â”‚
â”‚  â†’ Reviewer examines draft release                          â”‚
â”‚  â†’ Final sign-off before publication                        â”‚
â”‚  â†’ Environment: "public-release"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAGE 3: PUBLISH RELEASE (Automatic after approval)        â”‚
â”‚  âœ“ Publish GitHub release (triggers Zenodo archival)        â”‚
â”‚  âœ“ Generate CRAN submission instructions                    â”‚
â”‚  âœ“ Provide post-release checklist                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
</div>
<div class="section level2">
<h2 id="initial-setup">Initial Setup<a class="anchor" aria-label="anchor" href="#initial-setup"></a></h2>
<p>Before using the workflow for the first time, you must configure two GitHub Environments with protection rules.</p>
<div class="section level3">
<h3 id="step-1-create-pre-release-review-environment">Step 1: Create â€œpre-release-reviewâ€ Environment<a class="anchor" aria-label="anchor" href="#step-1-create-pre-release-review-environment"></a></h3>
<ol style="list-style-type: decimal"><li>Go to your GitHub repository</li>
<li>Navigate to <strong>Settings</strong> â†’ <strong>Environments</strong>
</li>
<li>Click <strong>New environment</strong>
</li>
<li>Name: <code>pre-release-review</code>
</li>
<li>Under <strong>Environment protection rules</strong>:
<ul><li>Enable <strong>Required reviewers</strong>
</li>
<li>Add 1-2 team members who should review validation results</li>
<li>These reviewers will check that all tests pass and quality checks succeed</li>
</ul></li>
<li>Click <strong>Save protection rules</strong>
</li>
</ol></div>
<div class="section level3">
<h3 id="step-2-configure-public-release-environment">Step 2: Configure â€œpublic-releaseâ€ Environment<a class="anchor" aria-label="anchor" href="#step-2-configure-public-release-environment"></a></h3>
<p>If you already have a <code>public-release</code> environment, verify its settings. Otherwise:</p>
<ol style="list-style-type: decimal"><li>In <strong>Settings</strong> â†’ <strong>Environments</strong>, go to your existing <code>public-release</code> environment (or create a new one)</li>
<li>Name: <code>public-release</code>
</li>
<li>Under <strong>Environment protection rules</strong>:
<ul><li>Enable <strong>Required reviewers</strong>
</li>
<li>Add 1-2 DIFFERENT team members from Gate 1 (for independent review)</li>
<li>These reviewers will perform final sign-off before publication</li>
<li>
<strong>Optional</strong>: Enable <strong>Wait timer</strong> (e.g., 60 minutes) for a cooling-off period</li>
</ul></li>
<li>Click <strong>Save protection rules</strong>
</li>
</ol></div>
<div class="section level3">
<h3 id="step-3-verify-workflow-file">Step 3: Verify Workflow File<a class="anchor" aria-label="anchor" href="#step-3-verify-workflow-file"></a></h3>
<p>Ensure the workflow file exists at:</p>
<pre><code><span><span class="va">.github</span><span class="op">/</span><span class="va">workflows</span><span class="op">/</span><span class="va">controlled</span><span class="op">-</span><span class="va">release.yaml</span></span></code></pre>
<p>This file should already be committed to the repository.</p>
</div>
</div>
<div class="section level2">
<h2 id="how-to-use-the-workflow">How to Use the Workflow<a class="anchor" aria-label="anchor" href="#how-to-use-the-workflow"></a></h2>
<div class="section level3">
<h3 id="preparing-for-a-release">Preparing for a Release<a class="anchor" aria-label="anchor" href="#preparing-for-a-release"></a></h3>
<ol style="list-style-type: decimal"><li>
<p><strong>Update version number</strong> in <code>DESCRIPTION</code> file:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>Version<span class="sc">:</span> <span class="dv">0</span>.<span class="fl">1.0</span></span></code></pre></div>
</li>
<li>
<p><strong>Update NEWS.md</strong> with release notes:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu"># emburden 0.1.0</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">## New Features</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="ss">- </span>Feature 1 description</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="ss">- </span>Feature 2 description</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="fu">## Bug Fixes</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="ss">- </span>Fix 1 description</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="fu">## Breaking Changes</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="ss">- </span>None</span></code></pre></div>
</li>
<li>
<p><strong>Commit all changes</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">git</span> add DESCRIPTION NEWS.md</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Prepare release 0.1.0"</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre></div>
</li>
</ol></div>
<div class="section level3">
<h3 id="triggering-a-release">Triggering a Release<a class="anchor" aria-label="anchor" href="#triggering-a-release"></a></h3>
<div class="section level4">
<h4 id="method-1-git-tag-recommended">Method 1: Git Tag (Recommended)<a class="anchor" aria-label="anchor" href="#method-1-git-tag-recommended"></a></h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Create annotated tag</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">git</span> tag <span class="at">-a</span> v0.1.0 <span class="at">-m</span> <span class="st">"Release version 0.1.0"</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># Push tag to GitHub (triggers workflow)</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">git</span> push origin v0.1.0</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="method-2-manual-workflow-dispatch">Method 2: Manual Workflow Dispatch<a class="anchor" aria-label="anchor" href="#method-2-manual-workflow-dispatch"></a></h4>
<ol style="list-style-type: decimal"><li>Go to <strong>Actions</strong> tab in GitHub</li>
<li>Select <strong>Controlled Release</strong> workflow</li>
<li>Click <strong>Run workflow</strong>
</li>
<li>Enter version (e.g., <code>0.1.0</code>)</li>
<li>Click <strong>Run workflow</strong>
</li>
</ol></div>
</div>
<div class="section level3">
<h3 id="monitoring-the-release-process">Monitoring the Release Process<a class="anchor" aria-label="anchor" href="#monitoring-the-release-process"></a></h3>
<div class="section level4">
<h4 id="stage-1-validation-5-10-minutes">Stage 1: Validation (5-10 minutes)<a class="anchor" aria-label="anchor" href="#stage-1-validation-5-10-minutes"></a></h4>
<p>The workflow automatically runs: - R CMD check on multiple platforms - Full test suite with coverage analysis - Package tarball build - Version consistency verification</p>
<p><strong>What to watch for:</strong> - Check the <strong>Actions</strong> tab for progress - All jobs should show green checkmarks - Validation report will be generated</p>
</div>
<div class="section level4">
<h4 id="gate-1-pre-release-review-manual">Gate 1: Pre-Release Review (Manual)<a class="anchor" aria-label="anchor" href="#gate-1-pre-release-review-manual"></a></h4>
<p><strong>You will receive a notification</strong> when approval is needed.</p>
<p><strong>Reviewers should:</strong> 1. Click the notification or go to <strong>Actions</strong> â†’ Select the running workflow 2. Review the validation report artifact 3. Check that all quality metrics pass: - R CMD check: 0 errors, 0 warnings - Test coverage: â‰¥70% - Package builds successfully 4. Click <strong>Review deployments</strong> button 5. Select <strong>pre-release-review</strong> environment 6. Click <strong>Approve and deploy</strong> or <strong>Reject</strong></p>
</div>
<div class="section level4">
<h4 id="stage-2-create-pre-release-2-3-minutes">Stage 2: Create Pre-Release (2-3 minutes)<a class="anchor" aria-label="anchor" href="#stage-2-create-pre-release-2-3-minutes"></a></h4>
<p>After Gate 1 approval, the workflow automatically: - Extracts release notes from NEWS.md - Creates a draft GitHub release - Uploads package tarball - Uploads validation report</p>
</div>
<div class="section level4">
<h4 id="gate-2-production-release-manual">Gate 2: Production Release (Manual)<a class="anchor" aria-label="anchor" href="#gate-2-production-release-manual"></a></h4>
<p><strong>Second approval notification</strong> will be sent.</p>
<p><strong>Reviewers should:</strong> 1. Go to <strong>Releases</strong> tab in GitHub 2. Review the draft release: - Check release notes are accurate - Verify tarball is attached - Confirm this is the correct version 3. Return to <strong>Actions</strong> tab 4. Click <strong>Review deployments</strong> 5. Select <strong>production-release</strong> environment 6. Click <strong>Approve and deploy</strong> or <strong>Reject</strong></p>
</div>
<div class="section level4">
<h4 id="stage-3-publish-release-1-2-minutes">Stage 3: Publish Release (1-2 minutes)<a class="anchor" aria-label="anchor" href="#stage-3-publish-release-1-2-minutes"></a></h4>
<p>After Gate 2 approval, the workflow automatically: - Publishes the GitHub release - Triggers Zenodo DOI archival (via Zenodo-GitHub integration) - Generates CRAN submission instructions</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="post-release-checklist">Post-Release Checklist<a class="anchor" aria-label="anchor" href="#post-release-checklist"></a></h2>
<p>After the workflow completes:</p>
<div class="section level3">
<h3 id="id_1-verify-github-release">1. Verify GitHub Release<a class="anchor" aria-label="anchor" href="#id_1-verify-github-release"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">Go to <strong>Releases</strong> tab</label></li>
<li><label><input type="checkbox">Confirm v0.1.0 is published (not draft)</label></li>
<li><label><input type="checkbox">Verify tarball is downloadable</label></li>
<li><label><input type="checkbox">Check release notes are correct</label></li>
</ul></div>
<div class="section level3">
<h3 id="id_2-verify-zenodo-archival">2. Verify Zenodo Archival<a class="anchor" aria-label="anchor" href="#id_2-verify-zenodo-archival"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">Wait 5-10 minutes for Zenodo to process</label></li>
<li><label><input type="checkbox">Refresh the GitHub release page</label></li>
<li><label><input type="checkbox">Look for a Zenodo badge with DOI</label></li>
<li><label><input type="checkbox">Click the badge to verify Zenodo record</label></li>
</ul></div>
<div class="section level3">
<h3 id="id_3-optional-submit-to-cran">3. Optional: Submit to CRAN<a class="anchor" aria-label="anchor" href="#id_3-optional-submit-to-cran"></a></h3>
<p>The workflow provides detailed CRAN submission instructions.</p>
<p><strong>Steps:</strong> 1. Download the package tarball from the GitHub release 2. Go to <a href="https://cran.r-project.org/submit.html" class="external-link uri">https://cran.r-project.org/submit.html</a> 3. Upload the tarball 4. Fill in submission form 5. Confirm maintainer email 6. Monitor email for CRAN feedback</p>
<p><strong>Typical timeline:</strong> - Initial automated checks: 1-2 hours - Human review: 2-7 days - Appears on CRAN: 24 hours after acceptance</p>
</div>
<div class="section level3">
<h3 id="id_4-update-package-website-if-applicable">4. Update Package Website (if applicable)<a class="anchor" aria-label="anchor" href="#id_4-update-package-website-if-applicable"></a></h3>
<p>If you have a pkgdown website:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Update website with new version</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"pkgdown::build_site()"</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># Deploy to GitHub Pages</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">git</span> add docs/</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Update website for v0.1.0"</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_5-announce-release">5. Announce Release<a class="anchor" aria-label="anchor" href="#id_5-announce-release"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">Social media (Twitter, Mastodon, etc.)</label></li>
<li><label><input type="checkbox">Mailing lists or forums</label></li>
<li><label><input type="checkbox">Project collaborators</label></li>
<li><label><input type="checkbox">Update README if needed</label></li>
</ul></div>
</div>
<div class="section level2">
<h2 id="approval-best-practices">Approval Best Practices<a class="anchor" aria-label="anchor" href="#approval-best-practices"></a></h2>
<div class="section level3">
<h3 id="for-gate-1-reviewers-pre-release">For Gate 1 Reviewers (Pre-Release)<a class="anchor" aria-label="anchor" href="#for-gate-1-reviewers-pre-release"></a></h3>
<p><strong>Focus on:</strong> Technical quality</p>
<p>âœ… <strong>Approve if:</strong> - All automated checks pass - Test coverage meets threshold - No errors or warnings in R CMD check - Package builds successfully</p>
<p>âŒ <strong>Reject if:</strong> - Tests are failing - Coverage is too low - R CMD check shows errors/warnings - Build fails</p>
</div>
<div class="section level3">
<h3 id="for-gate-2-reviewers-production">For Gate 2 Reviewers (Production)<a class="anchor" aria-label="anchor" href="#for-gate-2-reviewers-production"></a></h3>
<p><strong>Focus on:</strong> Release readiness</p>
<p>âœ… <strong>Approve if:</strong> - Release notes are accurate and complete - Version number is correct - No last-minute concerns - Ready for public release</p>
<p>âŒ <strong>Reject if:</strong> - Release notes missing or incorrect - Wrong version number - Need to make additional changes - Not ready for publication</p>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a></h2>
<div class="section level3">
<h3 id="workflow-fails-at-validation-stage">Workflow fails at validation stage<a class="anchor" aria-label="anchor" href="#workflow-fails-at-validation-stage"></a></h3>
<p><strong>Problem:</strong> R CMD check fails, tests fail, or build errors</p>
<p><strong>Solution:</strong> 1. Review the error logs in Actions tab 2. Fix the issues locally 3. Commit and push fixes 4. Delete the tag: <code>git tag -d v0.1.0 &amp;&amp; git push origin :v0.1.0</code> 5. Recreate the tag after fixes</p>
</div>
<div class="section level3">
<h3 id="approval-notification-not-received">Approval notification not received<a class="anchor" aria-label="anchor" href="#approval-notification-not-received"></a></h3>
<p><strong>Problem:</strong> Reviewer doesnâ€™t see approval request</p>
<p><strong>Solution:</strong> 1. Check GitHub notification settings 2. Go directly to Actions tab â†’ Select workflow 3. Look for â€œReview deploymentsâ€ button 4. Click to approve/reject</p>
</div>
<div class="section level3">
<h3 id="need-to-cancel-a-release">Need to cancel a release<a class="anchor" aria-label="anchor" href="#need-to-cancel-a-release"></a></h3>
<p><strong>Problem:</strong> Want to stop the release process</p>
<p><strong>Solution:</strong> 1. <strong>Before Gate 1:</strong> Simply donâ€™t approve, workflow will timeout 2. <strong>Between gates:</strong> Reject at Gate 2 3. <strong>After publication:</strong> Cannot unpublish, must create new patch release</p>
</div>
<div class="section level3">
<h3 id="version-mismatch-error">Version mismatch error<a class="anchor" aria-label="anchor" href="#version-mismatch-error"></a></h3>
<p><strong>Problem:</strong> â€œTag version does not match DESCRIPTION versionâ€</p>
<p><strong>Solution:</strong> 1. Verify DESCRIPTION has correct version 2. Verify git tag matches (without â€˜vâ€™ prefix in DESCRIPTION) 3. Delete incorrect tag 4. Recreate with correct version</p>
</div>
</div>
<div class="section level2">
<h2 id="security-considerations">Security Considerations<a class="anchor" aria-label="anchor" href="#security-considerations"></a></h2>
<div class="section level3">
<h3 id="why-dual-approval">Why Dual Approval?<a class="anchor" aria-label="anchor" href="#why-dual-approval"></a></h3>
<ul><li>
<strong>Separation of concerns:</strong> Technical review vs.Â release readiness</li>
<li>
<strong>Prevents accidents:</strong> Two people must agree to publish</li>
<li>
<strong>Audit trail:</strong> All approvals are logged in GitHub</li>
<li>
<strong>Human oversight:</strong> Catches issues automated tests might miss</li>
</ul></div>
<div class="section level3">
<h3 id="who-should-be-reviewers">Who Should Be Reviewers?<a class="anchor" aria-label="anchor" href="#who-should-be-reviewers"></a></h3>
<p><strong>Gate 1 (Pre-Release):</strong> - Technical team members - People familiar with R CMD check requirements - Those who can interpret test results</p>
<p><strong>Gate 2 (Production):</strong> - Project maintainers - People authorized to make releases - Independent from Gate 1 reviewers (for true dual approval)</p>
</div>
<div class="section level3">
<h3 id="best-practice-use-different-reviewers">Best Practice: Use Different Reviewers<a class="anchor" aria-label="anchor" href="#best-practice-use-different-reviewers"></a></h3>
<p>For true dual approval, Gate 1 and Gate 2 should have <strong>different reviewers</strong>. This provides independent verification at each stage.</p>
</div>
</div>
<div class="section level2">
<h2 id="advanced-configuration">Advanced Configuration<a class="anchor" aria-label="anchor" href="#advanced-configuration"></a></h2>
<div class="section level3">
<h3 id="adjusting-coverage-threshold">Adjusting Coverage Threshold<a class="anchor" aria-label="anchor" href="#adjusting-coverage-threshold"></a></h3>
<p>Edit <code>.github/workflows/controlled-release.yaml</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="at">if (covr_percent &lt; 70) {</span><span class="co">  # Change 70 to your threshold</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-wait-timer">Adding Wait Timer<a class="anchor" aria-label="anchor" href="#adding-wait-timer"></a></h3>
<p>In the <code>production-release</code> environment settings: - Enable â€œWait timerâ€ - Set duration (e.g., 60 minutes) - Forces a cooling-off period before final approval</p>
</div>
<div class="section level3">
<h3 id="disabling-dual-approval-not-recommended">Disabling Dual Approval (Not Recommended)<a class="anchor" aria-label="anchor" href="#disabling-dual-approval-not-recommended"></a></h3>
<p>To use single approval: 1. Keep only <code>production-release</code> environment 2. Remove <code>pre-release-review</code> job from workflow 3. Update job dependencies</p>
</div>
</div>
<div class="section level2">
<h2 id="faq">FAQ<a class="anchor" aria-label="anchor" href="#faq"></a></h2>
<p><strong>Q: Can I skip the approval gates for urgent releases?</strong></p>
<p>A: No.Â The approvals are enforced by GitHub Environment protection rules. This is intentional for safety. If truly urgent, you can: 1. Use GitHubâ€™s â€œBypass environment protectionâ€ feature (requires admin privileges) 2. Or manually publish a release outside this workflow</p>
<p><strong>Q: How long do approvals stay pending?</strong></p>
<p>A: By default, GitHub workflow runs timeout after 72 hours. Approve within that timeframe.</p>
<p><strong>Q: Can I approve my own releases?</strong></p>
<p>A: Yes, if youâ€™re listed as a reviewer, but this defeats the purpose of dual approval. Best practice is to have different people approve.</p>
<p><strong>Q: What happens if Zenodo doesnâ€™t create a DOI?</strong></p>
<p>A: Check that: 1. Zenodo-GitHub integration is enabled in repository settings 2. The repository is public 3. Wait 10-15 minutes for Zenodo to process 4. Check Zenodo dashboard for any errors</p>
<p><strong>Q: Can I test the workflow without publishing?</strong></p>
<p>A: Yes: 1. Create a test branch 2. Push a tag like <code>v0.0.1-test</code> 3. The workflow will run but you can reject at Gate 2 4. Delete the draft release afterward</p>
</div>
<div class="section level2">
<h2 id="related-documentation">Related Documentation<a class="anchor" aria-label="anchor" href="#related-documentation"></a></h2>
<ul><li>
<a href="../../CONTRIBUTING.html">CONTRIBUTING.md</a> - Contribution guidelines</li>
<li><a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment" class="external-link">GitHub Environments Documentation</a></li>
<li><a href="https://docs.github.com/en/repositories/archiving-a-github-repository/referencing-and-citing-content" class="external-link">Zenodo-GitHub Integration</a></li>
<li><a href="https://cran.r-project.org/web/packages/policies.html" class="external-link">CRAN Submission Guidelines</a></li>
</ul></div>
<div class="section level2">
<h2 id="support">Support<a class="anchor" aria-label="anchor" href="#support"></a></h2>
<p>If you encounter issues with the release workflow:</p>
<ol style="list-style-type: decimal"><li>Check this documentation first</li>
<li>Review GitHub Actions logs for error details</li>
<li>Open an issue in the repository</li>
<li>Contact the package maintainer: <a href="mailto:eric@scheier.org" class="email">eric@scheier.org</a>
</li>
</ol><hr><p><strong>Last Updated:</strong> 2025-11-04 <strong>Workflow Version:</strong> 1.0</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Scheier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

