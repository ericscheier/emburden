% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/energy_ratios.R
\name{neb_func}
\alias{neb_func}
\title{Calculate Net Energy Burden (NEB)}
\usage{
neb_func(g, s, se = NULL)
}
\arguments{
\item{g}{Numeric vector of gross income values}

\item{s}{Numeric vector of energy spending values}

\item{se}{Optional numeric vector of effective energy spending (defaults to s)}
}
\value{
Numeric vector of Net Energy Burden values (identical to energy burden)
}
\description{
Calculates Net Energy Burden as the ratio of energy spending to gross income.
\strong{Note}: NEB is mathematically identical to Energy Burden (EB = S/G). The
distinction is conceptual - "NEB" emphasizes that proper aggregation methodology
should be used via Net Energy Return (Nh).
}
\details{
\strong{Mathematical Identity:} At the household level, NEB = EB = S/G.

\strong{For aggregation across households:}
\itemize{
\item \strong{Individual household data}: Use \code{ner_func()} first, then \code{weighted.mean(nh)},
then convert back via \code{neb = 1/(1+nh_mean)}. This uses arithmetic mean instead
of harmonic mean, providing both computational simplicity and numerical stability.
\item \strong{Cohort data} (pre-aggregated totals): Can use direct calculation
\code{sum(spending)/sum(income)} which is equivalent to the Nh method.
\item \strong{Never use} \code{weighted.mean(neb)} or \code{weighted.mean(eb)} - this introduces
1-5\% error.
}

\strong{Why "NEB" vs "EB"?} The "Net" terminology connects to the Nh (Net Energy Return)
framework and reminds users to use proper aggregation. Mathematically identical,
conceptually clarifying.
}
\examples{
# Individual household - NEB identical to EB
neb_func(50000, 3000)  # 0.06
energy_burden_func(50000, 3000)  # 0.06 (same)

# For aggregation - use Nh method (individual HH data)
incomes <- c(30000, 50000, 75000)
spending <- c(3000, 3500, 4000)
households <- c(100, 150, 200)

# CORRECT: Via Nh (arithmetic mean)
nh <- ner_func(incomes, spending)
nh_mean <- weighted.mean(nh, households)
neb_correct <- 1 / (1 + nh_mean)

# WRONG: Direct mean of NEB
neb_wrong <- weighted.mean(neb_func(incomes, spending), households)

# For cohort data (totals already aggregated)
total_income <- c(3000000, 7500000, 15000000)
total_spend <- c(300000, 525000, 750000)
neb_direct <- sum(total_spend) / sum(total_income)  # Simple and correct
}
\seealso{
\code{\link[=ner_func]{ner_func()}} for the Net Energy Return calculation used in proper aggregation

\code{\link[=energy_burden_func]{energy_burden_func()}} for the mathematically identical calculation
}
