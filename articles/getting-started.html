<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with emburden • emburden</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with emburden">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">emburden</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/methodology.html">Methodology</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/jss-emburden.html">JSS Package Manuscript</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ericscheier/emburden"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with emburden</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ericscheier/emburden/blob/main/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>emburden</strong> package provides tools for analyzing
household energy burden using the Net Energy Return (Nh) methodology.
This vignette will walk you through the basic workflow for calculating
and analyzing energy burden metrics.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install emburden from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ericscheier/emburden"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ericscheier/emburden" class="external-link">emburden</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="what-is-energy-burden">What is Energy Burden?<a class="anchor" aria-label="anchor" href="#what-is-energy-burden"></a>
</h2>
<p>Energy burden is the ratio of household energy spending to gross
income:</p>
<p><strong>Energy Burden (EB) = S / G</strong></p>
<p>Where: - <strong>S</strong> = Energy spending (electricity, gas,
other fuels) - <strong>G</strong> = Gross household income</p>
<p>A household spending $3,000 on energy with $50,000 income has a 6%
energy burden.</p>
</div>
<div class="section level2">
<h2 id="quick-example-single-household">Quick Example: Single Household<a class="anchor" aria-label="anchor" href="#quick-example-single-household"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate energy burden for a single household</span></span>
<span><span class="va">gross_income</span> <span class="op">&lt;-</span> <span class="fl">50000</span></span>
<span><span class="va">energy_spending</span> <span class="op">&lt;-</span> <span class="fl">3000</span></span>
<span></span>
<span><span class="co"># Method 1: Direct energy burden</span></span>
<span><span class="va">eb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/energy_burden_func.html">energy_burden_func</a></span><span class="op">(</span><span class="va">gross_income</span>, <span class="va">energy_spending</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Energy Burden:"</span>, <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">(</span><span class="va">eb</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Energy Burden: 6%"</span></span>
<span></span>
<span><span class="co"># Method 2: Via Net Energy Return (mathematically identical)</span></span>
<span><span class="va">nh</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ner_func.html">ner_func</a></span><span class="op">(</span><span class="va">gross_income</span>, <span class="va">energy_spending</span><span class="op">)</span></span>
<span><span class="va">neb</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="va">nh</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Net Energy Burden:"</span>, <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">(</span><span class="va">neb</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Net Energy Burden: 6%"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Net Energy Return:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">nh</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Net Energy Return: 15.67"</span></span></code></pre></div>
<p>For a single household, both methods give the same result: <strong>6%
energy burden</strong>.</p>
</div>
<div class="section level2">
<h2 id="loading-data">Loading Data<a class="anchor" aria-label="anchor" href="#loading-data"></a>
</h2>
<p>The package automatically downloads data from OpenEI on first
use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load census tract data for North Carolina</span></span>
<span><span class="va">nc_tracts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_census_tract_data.html">load_census_tract_data</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load household cohort data by Area Median Income</span></span>
<span><span class="va">nc_ami</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_cohort_data.html">load_cohort_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ami"</span>, states <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nc_ami</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculating-metrics-from-cohort-data">Calculating Metrics from Cohort Data<a class="anchor" aria-label="anchor" href="#calculating-metrics-from-cohort-data"></a>
</h2>
<p>When working with pre-aggregated cohort data (total income and
spending), calculate metrics from the totals:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate mean income and spending from totals</span></span>
<span><span class="va">nc_data</span> <span class="op">&lt;-</span> <span class="va">nc_ami</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    mean_income <span class="op">=</span> <span class="va">total_income</span> <span class="op">/</span> <span class="va">households</span>,</span>
<span>    mean_energy_spending <span class="op">=</span> <span class="op">(</span><span class="va">total_electricity_spend</span> <span class="op">+</span></span>
<span>                           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">coalesce</a></span><span class="op">(</span><span class="va">total_gas_spend</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>                           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">coalesce</a></span><span class="op">(</span><span class="va">total_other_spend</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="va">households</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mean_income</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mean_energy_spending</span><span class="op">)</span>, <span class="va">households</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    eb <span class="op">=</span> <span class="fu"><a href="../reference/energy_burden_func.html">energy_burden_func</a></span><span class="op">(</span><span class="va">mean_income</span>, <span class="va">mean_energy_spending</span><span class="op">)</span>,</span>
<span>    nh <span class="op">=</span> <span class="fu"><a href="../reference/ner_func.html">ner_func</a></span><span class="op">(</span><span class="va">mean_income</span>, <span class="va">mean_energy_spending</span><span class="op">)</span>,</span>
<span>    neb <span class="op">=</span> <span class="fu"><a href="../reference/neb_func.html">neb_func</a></span><span class="op">(</span><span class="va">mean_income</span>, <span class="va">mean_energy_spending</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="aggregating-energy-burden-critical">Aggregating Energy Burden (Critical!)<a class="anchor" aria-label="anchor" href="#aggregating-energy-burden-critical"></a>
</h2>
<p><strong>⚠️ Important</strong>: Energy burden is a ratio and
<strong>cannot be aggregated using arithmetic mean</strong>!</p>
<div class="section level3">
<h3 id="the-wrong-way">The WRONG Way<a class="anchor" aria-label="anchor" href="#the-wrong-way"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ❌ WRONG: Direct averaging of energy burden introduces ~1-5% error</span></span>
<span><span class="va">eb_wrong</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean</a></span><span class="op">(</span><span class="va">nc_data</span><span class="op">$</span><span class="va">eb</span>, <span class="va">nc_data</span><span class="op">$</span><span class="va">households</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-correct-way-via-net-energy-return">The CORRECT Way: Via Net Energy Return<a class="anchor" aria-label="anchor" href="#the-correct-way-via-net-energy-return"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ✅ CORRECT: Aggregate using Nh, then convert to NEB</span></span>
<span><span class="va">nh_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean</a></span><span class="op">(</span><span class="va">nc_data</span><span class="op">$</span><span class="va">nh</span>, <span class="va">nc_data</span><span class="op">$</span><span class="va">households</span><span class="op">)</span></span>
<span><span class="va">neb_correct</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">nh_mean</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Correct NEB:"</span>, <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">(</span><span class="va">neb_correct</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Why does this work?</strong> The Nh transformation allows us
to use simple arithmetic weighted mean instead of harmonic mean, making
aggregation both simpler and more intuitive.</p>
</div>
</div>
<div class="section level2">
<h2 id="analysis-by-income-bracket">Analysis by Income Bracket<a class="anchor" aria-label="anchor" href="#analysis-by-income-bracket"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nc_by_income</span> <span class="op">&lt;-</span> <span class="va">nc_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">income_bracket</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    households <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">households</span><span class="op">)</span>,</span>
<span>    nh_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean</a></span><span class="op">(</span><span class="va">nh</span>, <span class="va">households</span><span class="op">)</span>,</span>
<span>    neb <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">nh_mean</span><span class="op">)</span>,  <span class="co"># Correct aggregation</span></span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">nc_by_income</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="identifying-high-energy-burden-households">Identifying High Energy Burden Households<a class="anchor" aria-label="anchor" href="#identifying-high-energy-burden-households"></a>
</h2>
<p>The 6% energy burden threshold is commonly used to identify energy
poverty:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 6% energy burden corresponds to Nh = 15.67</span></span>
<span><span class="va">high_burden_threshold</span> <span class="op">&lt;-</span> <span class="fl">15.67</span></span>
<span></span>
<span><span class="va">high_burden_households</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">nc_data</span><span class="op">$</span><span class="va">households</span><span class="op">[</span><span class="va">nc_data</span><span class="op">$</span><span class="va">nh</span> <span class="op">&lt;</span> <span class="va">high_burden_threshold</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">total_households</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">nc_data</span><span class="op">$</span><span class="va">households</span><span class="op">)</span></span>
<span><span class="va">high_burden_pct</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">high_burden_households</span> <span class="op">/</span> <span class="va">total_households</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Households with &gt;6% energy burden:"</span>,</span>
<span>            <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">(</span><span class="va">high_burden_pct</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-calculate_weighted_metrics">Using calculate_weighted_metrics()<a class="anchor" aria-label="anchor" href="#using-calculate_weighted_metrics"></a>
</h2>
<p>For more complex grouped analysis, use the built-in function:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_weighted_metrics.html">calculate_weighted_metrics</a></span><span class="op">(</span></span>
<span>  graph_data <span class="op">=</span> <span class="va">nc_ami</span>,</span>
<span>  group_columns <span class="op">=</span> <span class="st">"income_bracket"</span>,</span>
<span>  metric_name <span class="op">=</span> <span class="st">"ner"</span>,</span>
<span>  metric_cutoff_level <span class="op">=</span> <span class="fl">15.67</span>,  <span class="co"># 6% burden threshold</span></span>
<span>  upper_quantile_view <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  lower_quantile_view <span class="op">=</span> <span class="fl">0.05</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Format for publication</span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">formatted_median</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/to_percent.html">to_percent</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">metric_median</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="key-takeaways">Key Takeaways<a class="anchor" aria-label="anchor" href="#key-takeaways"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>For single households</strong>: Both EB and NEB give
identical results</li>
<li>
<strong>For aggregation</strong>: Always use the Nh method to avoid
errors</li>
<li>
<strong>Never</strong>: Directly average energy burden values</li>
<li>
<strong>Data loading</strong>: Automatic from OpenEI (2018 and 2022
vintages available)</li>
<li>
<strong>Threshold</strong>: 6% energy burden (Nh ≥ 15.67) identifies
high burden households</li>
</ol>
</div>
<div class="section level2">
<h2 id="temporal-comparison">Temporal Comparison<a class="anchor" aria-label="anchor" href="#temporal-comparison"></a>
</h2>
<p>The package provides a dedicated function for comparing energy burden
across data vintages (2018 vs 2022):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare by income bracket</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_energy_burden.html">compare_energy_burden</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="st">"ami"</span>,</span>
<span>  states <span class="op">=</span> <span class="st">"NC"</span>,</span>
<span>  group_by <span class="op">=</span> <span class="st">"income_bracket"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The function automatically:</span></span>
<span><span class="co"># - Loads both 2018 and 2022 data</span></span>
<span><span class="co"># - Normalizes schema differences (4 vs 6 AMI brackets)</span></span>
<span><span class="co"># - Performs proper Nh-based aggregation</span></span>
<span><span class="co"># - Calculates changes in energy burden</span></span>
<span></span>
<span><span class="co"># Grouping options:</span></span>
<span><span class="co"># - "income_bracket": Compare by AMI/FPL brackets (default)</span></span>
<span><span class="co"># - "state": Compare multiple states</span></span>
<span><span class="co"># - "none": Overall state-level comparison</span></span>
<span></span>
<span><span class="co"># Example: State-level comparison</span></span>
<span><span class="va">state_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_energy_burden.html">compare_energy_burden</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="st">"ami"</span>,</span>
<span>  states <span class="op">=</span> <span class="st">"NC"</span>,</span>
<span>  group_by <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Access specific metrics</span></span>
<span><span class="va">state_comparison</span><span class="op">$</span><span class="va">neb_2018</span>         <span class="co"># 2018 energy burden</span></span>
<span><span class="va">state_comparison</span><span class="op">$</span><span class="va">neb_2022</span>         <span class="co"># 2022 energy burden</span></span>
<span><span class="va">state_comparison</span><span class="op">$</span><span class="va">neb_change_pp</span>    <span class="co"># Change in percentage points</span></span>
<span><span class="va">state_comparison</span><span class="op">$</span><span class="va">neb_change_pct</span>   <span class="co"># Relative change percentage</span></span></code></pre></div>
<p>This is much simpler than manually loading and aggregating both
vintages!</p>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>See <code><a href="../articles/methodology.html">vignette("methodology")</a></code> for mathematical
details</li>
<li>See <code>NEB_QUICKSTART.md</code> for quick reference</li>
<li>Run example scripts in <code>analysis/scripts/</code> directory</li>
<li>Read full documentation: <code><a href="../reference/energy_burden_func.html">?energy_burden_func</a></code>,
<code><a href="../reference/ner_func.html">?ner_func</a></code>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>
<strong>Paper</strong>: “Net energy metrics reveal striking
disparities across United States household energy burdens”</li>
<li>
<strong>LEAD Tool Data</strong>: <a href="https://data.openei.org/" class="external-link uri">https://data.openei.org/</a>
</li>
<li>
<strong>GitHub</strong>: <a href="https://github.com/ericscheier/emburden" class="external-link uri">https://github.com/ericscheier/emburden</a>
</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Scheier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
