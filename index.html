<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Energy Burden Analysis with Net Energy Return • emburden</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Energy Burden Analysis with Net Energy Return">
<meta name="description" content="R package for analyzing household energy burden using proper aggregation methodology based on Net Energy Return (Nh) transformations.
">
<meta property="og:description" content="R package for analyzing household energy burden using proper aggregation methodology based on Net Energy Return (Nh) transformations.
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">emburden</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="articles/methodology.html">Methodology</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ericscheier/emburden"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="emburden">emburden<a class="anchor" aria-label="anchor" href="#emburden"></a>
</h1></div>
<!-- badges: start -->

<p>R package for analyzing household energy burden using the Net Energy Return (Nh) methodology.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><strong>emburden</strong> provides tools for calculating and analyzing household energy burden across geographic and demographic cohorts. The package implements proper aggregation methodology using Net Energy Return (Nh) as the preferred metric before converting back to energy burden ratios.</p>
<p><strong>NEW</strong>: Data downloads automatically from OpenEI on first use! No manual data setup required. Data is automatically imported to database for fast subsequent access.</p>
<div class="section level3">
<h3 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h3>
<ul>
<li>
<strong>Energy metrics calculations</strong>: Energy burden, Net Energy Return (Nh), EROI, DEAR</li>
<li>
<strong>Weighted statistical analysis</strong>: Proper aggregation using household weights</li>
<li>
<strong>Flexible grouping</strong>: Analyze by utility, state, county, census tract, or custom categories</li>
<li>
<strong>Publication-ready formatting</strong>: Functions for creating formatted tables in multiple output formats</li>
</ul>
</div>
<div class="section level3">
<h3 id="why-net-energy-return">Why Net Energy Return?<a class="anchor" aria-label="anchor" href="#why-net-energy-return"></a>
</h3>
<p>Energy burden (E_b = S/G) is a ratio that requires harmonic mean aggregation. The Net Energy Return transformation (Nh = (G-S)/S) allows proper weighted mean aggregation using simple arithmetic mean, then converts back to energy burden via E_b = 1/(Nh+1).</p>
<p><strong>Computational Advantage</strong> (applies to <strong>aggregation across households only</strong>): When aggregating individual household data, the Nh method uses arithmetic mean (<code>weighted.mean(nh)</code>) instead of harmonic mean (<code>1/weighted.mean(1/eb)</code>), providing: - Simpler computation with standard functions - Better numerical stability (avoids division by very small EB values) - More interpretable results (“average net return per dollar”) - Clear error prevention (makes it obvious you can’t use arithmetic mean on EB directly)</p>
<p>Note: For single household calculations, both methods are mathematically equivalent (NEB = EB). The advantage appears only when aggregating across multiple households.</p>
<p>This methodology is detailed in:</p>
<blockquote>
<p><strong>Net energy metrics reveal striking disparities across United States household energy burdens</strong></p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of emburden from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ericscheier/emburden"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ericscheier/emburden" class="external-link">emburden</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Data downloads automatically on first use!</span></span>
<span><span class="co"># Load census tract data for North Carolina</span></span>
<span><span class="va">nc_tracts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_census_tract_data.html">load_census_tract_data</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load household cohort data by Area Median Income</span></span>
<span><span class="va">nc_ami</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_cohort_data.html">load_cohort_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ami"</span>, states <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># === EXAMPLE 1: Single household calculation ===</span></span>
<span><span class="va">gross_income</span> <span class="op">&lt;-</span> <span class="fl">50000</span></span>
<span><span class="va">energy_spending</span> <span class="op">&lt;-</span> <span class="fl">3000</span></span>
<span></span>
<span><span class="co"># Method 1: Direct energy burden</span></span>
<span><span class="va">eb</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/energy_burden_func.html">energy_burden_func</a></span><span class="op">(</span><span class="va">gross_income</span>, <span class="va">energy_spending</span><span class="op">)</span>  <span class="co"># 0.06</span></span>
<span></span>
<span><span class="co"># Method 2: Via Net Energy Return (mathematically identical)</span></span>
<span><span class="va">nh</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ner_func.html">ner_func</a></span><span class="op">(</span><span class="va">gross_income</span>, <span class="va">energy_spending</span><span class="op">)</span>  <span class="co"># 15.67</span></span>
<span><span class="va">neb</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="va">nh</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>  <span class="co"># 0.06 (same as eb)</span></span>
<span></span>
<span><span class="co"># === EXAMPLE 2: Individual household data aggregation ===</span></span>
<span><span class="co"># CORRECT: Use Nh method (arithmetic mean)</span></span>
<span><span class="va">incomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30000</span>, <span class="fl">50000</span>, <span class="fl">75000</span><span class="op">)</span></span>
<span><span class="va">spendings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3000</span>, <span class="fl">3500</span>, <span class="fl">4000</span><span class="op">)</span></span>
<span><span class="va">households</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">150</span>, <span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nh</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ner_func.html">ner_func</a></span><span class="op">(</span><span class="va">incomes</span>, <span class="va">spendings</span><span class="op">)</span></span>
<span><span class="va">nh_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean</a></span><span class="op">(</span><span class="va">nh</span>, <span class="va">households</span><span class="op">)</span></span>
<span><span class="va">neb_correct</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">nh_mean</span><span class="op">)</span>  <span class="co"># Proper aggregation ✓</span></span>
<span></span>
<span><span class="co"># WRONG: Direct mean of energy burden (introduces 1-5% error)</span></span>
<span><span class="co"># neb_wrong &lt;- weighted.mean(energy_burden_func(incomes, spendings), households)  # DON'T DO THIS!</span></span>
<span></span>
<span><span class="co"># === EXAMPLE 3: Cohort data aggregation ===</span></span>
<span><span class="co"># For pre-aggregated totals, direct ratio works</span></span>
<span><span class="va">neb_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">nc_ami</span><span class="op">$</span><span class="va">total_electricity_spend</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">nc_ami</span><span class="op">$</span><span class="va">total_income</span><span class="op">)</span>  <span class="co"># Simple ✓</span></span>
<span></span>
<span><span class="co"># === EXAMPLE 4: Grouped analysis ===</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_weighted_metrics.html">calculate_weighted_metrics</a></span><span class="op">(</span></span>
<span>  graph_data <span class="op">=</span> <span class="va">nc_ami</span>,</span>
<span>  group_columns <span class="op">=</span> <span class="st">"income_bracket"</span>,</span>
<span>  metric_name <span class="op">=</span> <span class="st">"ner"</span>,</span>
<span>  metric_cutoff_level <span class="op">=</span> <span class="fl">15.67</span>,  <span class="co"># 6% energy burden threshold</span></span>
<span>  upper_quantile_view <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  lower_quantile_view <span class="op">=</span> <span class="fl">0.05</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Format results for publication</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">formatted_median</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/to_percent.html">to_percent</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">metric_median</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="core-functions">Core Functions<a class="anchor" aria-label="anchor" href="#core-functions"></a>
</h2>
<div class="section level3">
<h3 id="energy-metrics">Energy Metrics<a class="anchor" aria-label="anchor" href="#energy-metrics"></a>
</h3>
<p><strong>Household-level calculations</strong> (all mathematically related): - <code>energy_burden_func(g, s)</code> - Energy Burden: <strong>S/G</strong> - <code>neb_func(g, s)</code> - Net Energy Burden: <strong>S/G</strong> (identical to EB, emphasizes proper aggregation) - <code>ner_func(g, s)</code> - Net Energy Return: <strong>(G-S)/S</strong> (use this for aggregation!) - <code>eroi_func(g, s)</code> - Energy Return on Investment: <strong>G/Se</strong> - <code>dear_func(g, s)</code> - Disposable Energy-Adjusted Resources: <strong>(G-S)/G</strong></p>
<p><strong>Key relationships</strong>: - At household level: <code>neb_func() == energy_burden_func()</code> (identical) - Transformation: <code>neb = 1/(1+nh)</code> and <code>nh = (1/neb) - 1</code> - 6% energy burden threshold ↔︎ Nh ≥ 15.67</p>
<p><strong>Aggregation guidance</strong>: - <strong>Individual household data</strong>: Calculate <code>nh &lt;- ner_func(income, spending)</code>, then <code>neb_aggregate &lt;- 1/(1 + weighted.mean(nh, weights))</code> (arithmetic mean ✓) - <strong>Cohort data</strong> (pre-aggregated totals): Calculate <code>neb &lt;- sum(total_spending) / sum(total_income)</code> (direct ratio ✓) - <strong>NEVER use</strong>: <code>weighted.mean(neb_func(...))</code> or <code>mean(energy_burden_func(...))</code> (arithmetic mean of ratios ✗ introduces 1-5% error)</p>
</div>
<div class="section level3">
<h3 id="statistical-analysis">Statistical Analysis<a class="anchor" aria-label="anchor" href="#statistical-analysis"></a>
</h3>
<ul>
<li>
<code><a href="reference/calculate_weighted_metrics.html">calculate_weighted_metrics()</a></code> - Weighted mean, median, quantiles with grouping</li>
<li>Automatically calculates poverty rates below specified thresholds</li>
<li>Handles missing data and small sample sizes</li>
</ul>
</div>
<div class="section level3">
<h3 id="formatting">Formatting<a class="anchor" aria-label="anchor" href="#formatting"></a>
</h3>
<ul>
<li>
<code><a href="reference/to_percent.html">to_percent()</a></code> - Format as percentage with optional LaTeX escaping</li>
<li>
<code><a href="reference/to_dollar.html">to_dollar()</a></code> - Format as currency</li>
<li>
<code><a href="reference/to_big.html">to_big()</a></code> - Format large numbers with thousand separators</li>
<li>
<code><a href="reference/to_million.html">to_million()</a></code> / <code><a href="reference/to_billion_dollar.html">to_billion_dollar()</a></code> - Compact formats for large values</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="project-structure">Project Structure<a class="anchor" aria-label="anchor" href="#project-structure"></a>
</h2>
<p>This repository contains both the <strong>R package</strong> and <strong>analysis code</strong>:</p>
<pre><code>net_energy_equity/
├── R/                      # Package source code (exportable)
│   ├── energy_ratios.R     # Energy metric calculations
│   ├── metrics.R           # Weighted statistical functions
│   └── formatting.R        # Output formatting utilities
├── analysis/               # Analysis scripts and outputs (not in package)
│   ├── scripts/            # Example analysis scripts
│   └── outputs/            # Generated tables and results
├── DESCRIPTION             # Package metadata
├── NAMESPACE               # Package exports
└── README.md               # This file</code></pre>
<p>The package is designed to be extractable to a separate repository while analysis scripts remain here and depend on the installed package.</p>
</div>
<div class="section level2">
<h2 id="example-analysis">Example Analysis<a class="anchor" aria-label="anchor" href="#example-analysis"></a>
</h2>
<p>See <code>analysis/scripts/</code> for complete examples:</p>
<ul>
<li>
<strong><code>nc_all_utilities_energy_burden.R</code></strong>: Analyze all NC electric utilities</li>
<li>
<strong><code>nc_cooperatives_energy_burden.R</code></strong>: Focus on NC electric cooperatives</li>
<li>
<strong><code>all_utilities_energy_burden.R</code></strong>: National-level analysis</li>
</ul>
<p>Run from project root:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load package for development</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Data downloads automatically on first use!</span></span>
<span><span class="co"># Run analysis</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"analysis/scripts/nc_all_utilities_energy_burden.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View outputs in analysis/outputs/</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-requirements">Data Requirements<a class="anchor" aria-label="anchor" href="#data-requirements"></a>
</h2>
<div class="section level3">
<h3 id="automatic-data-download">Automatic Data Download<a class="anchor" aria-label="anchor" href="#automatic-data-download"></a>
</h3>
<p>The package automatically downloads LEAD Tool data from OpenEI on first use and caches it locally for fast subsequent access. No manual data setup required!</p>
<p><strong>NEW in v0.3.0</strong>: Support for both 2018 and 2022 LEAD Tool data vintages enables temporal analysis.</p>
<p><strong>Loading data</strong> (automatic database/CSV/OpenEI download fallback):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ericscheier/emburden" class="external-link">emburden</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check which data source is available</span></span>
<span><span class="fu"><a href="reference/check_data_sources.html">check_data_sources</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load census tract data (tries database → CSV → automatic download)</span></span>
<span><span class="va">nc_tracts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_census_tract_data.html">load_census_tract_data</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load household cohort data (defaults to latest vintage - 2022)</span></span>
<span><span class="co"># Auto-downloads from OpenEI on first use, imports to database for fast subsequent access!</span></span>
<span><span class="va">nc_ami</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_cohort_data.html">load_cohort_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ami"</span>, states <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load specific vintage (2018 or 2022)</span></span>
<span><span class="va">nc_ami_2018</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_cohort_data.html">load_cohort_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ami"</span>, states <span class="op">=</span> <span class="st">"NC"</span>, vintage <span class="op">=</span> <span class="st">"2018"</span><span class="op">)</span></span>
<span><span class="va">nc_ami_2022</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_cohort_data.html">load_cohort_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ami"</span>, states <span class="op">=</span> <span class="st">"NC"</span>, vintage <span class="op">=</span> <span class="st">"2022"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare vintages for temporal analysis</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu">compare_vintages</span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ami"</span>, states <span class="op">=</span> <span class="st">"NC"</span>, aggregate_by <span class="op">=</span> <span class="st">"state"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Data Loading Workflow:</strong></p>
<p>On first use, <code><a href="reference/load_cohort_data.html">load_cohort_data()</a></code> automatically: 1. <strong>Tries local database</strong> for fast access 2. <strong>Falls back to local CSV</strong> files if database unavailable 3. <strong>Downloads from OpenEI</strong> (DOE LEAD dataset) if neither exists 4. <strong>Imports to database</strong> automatically for subsequent fast access 5. Returns the requested data - no manual steps required!</p>
<p>Data sources: - <strong>OpenEI 2018</strong>: <a href="https://data.openei.org/submissions/573" class="external-link uri">https://data.openei.org/submissions/573</a> (4 AMI brackets) - <strong>OpenEI 2022</strong>: <a href="https://data.openei.org/submissions/6219" class="external-link uri">https://data.openei.org/submissions/6219</a> (6 AMI brackets)</p>
<p>See <code>data-raw/README.md</code> for complete migration documentation and <code>data-raw/LEAD_SCHEMA_COMPARISON.md</code> for vintage differences.</p>
</div>
<div class="section level3">
<h3 id="legacy-csv-files">Legacy CSV Files<a class="anchor" aria-label="anchor" href="#legacy-csv-files"></a>
</h3>
<p>For backward compatibility, the package still supports CSV files:</p>
<ul>
<li>
<code>CensusTractData.csv</code> - Census tract demographics and utility info</li>
<li>
<code>CohortData_AreaMedianIncome.csv</code> - Energy burden by Area Median Income brackets</li>
<li>
<code>CohortData_FederalPovertyLine.csv</code> - Energy burden by Federal Poverty Line brackets</li>
</ul>
<p>These files are large (&gt;100MB each) and not included in git. Contact maintainer for access or use the database (recommended).</p>
</div>
</div>
<div class="section level2">
<h2 id="energy-poverty-threshold">Energy Poverty Threshold<a class="anchor" aria-label="anchor" href="#energy-poverty-threshold"></a>
</h2>
<p>The standard 6% energy burden threshold corresponds to:</p>
<ul>
<li>
<strong>Energy Burden</strong>: E_b ≤ 0.06</li>
<li>
<strong>Net Energy Return</strong>: Nh ≤ 15.67</li>
<li>
<strong>EROI</strong>: EROI ≥ 16.67</li>
</ul>
<p>Use <code>ner_func(g = 1, s = 0.06)</code> to calculate the Nh threshold for any energy burden level.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use this package in research, please cite:</p>
<pre><code>[Citation information to be added]</code></pre>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>GNU Affero General Public License v3.0 or later (AGPL-3+)</p>
<p>See <a href="LICENSE">LICENSE</a> for full text.</p>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Contributions are welcome! Please:</p>
<ol style="list-style-type: decimal">
<li>Fork the repository</li>
<li>Create a feature branch</li>
<li>Make your changes with tests and documentation</li>
<li>Submit a pull request</li>
</ol>
</div>
<div class="section level2">
<h2 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a>
</h2>
<p>Report bugs or request features at: <a href="https://github.com/ericscheier/emburden/issues" class="external-link uri">https://github.com/ericscheier/emburden/issues</a></p>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load package during development</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check package</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build documentation</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install locally</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="database-integration">Database Integration<a class="anchor" aria-label="anchor" href="#database-integration"></a>
</h2>
<p>The package supports local SQLite database integration for enhanced analysis and improved performance:</p>
<div class="section level3">
<h3 id="whats-available">What’s Available<a class="anchor" aria-label="anchor" href="#whats-available"></a>
</h3>
<p><strong>Energy Burden Data</strong> (new in v0.2.0): - <strong>Census tract demographics</strong> - 72K tracts with utility service territory info - <strong>Household cohort energy burden</strong> - 2.4M cohorts by income/tenure/housing type - <strong>Area Median Income (AMI) brackets</strong> - Income relative to local median - <strong>Federal Poverty Line (FPL) brackets</strong> - Income relative to poverty threshold</p>
<p><strong>Utility &amp; Market Data</strong>: - <strong>Utility electricity rates</strong> by ZIP code - <strong>eGrid emissions subregions</strong> for environmental justice analysis - <strong>Geographic crosswalks</strong> (tract ↔︎ ZIP ↔︎ county) - <strong>State retail sales projections</strong> (1998-2050) - <strong>Renewable generator registry</strong></p>
</div>
<div class="section level3">
<h3 id="installation-1">Installation<a class="anchor" aria-label="anchor" href="#installation-1"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install database packages</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DBI"</span>, <span class="st">"RSQLite"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Optional: Set environment variable to use existing database</span></span>
<span><span class="co"># Sys.setenv(EMBURDEN_DB_PATH = "/path/to/your/database.sqlite")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h3>
<p><strong>Energy Burden Data</strong> (automatic database/CSV/download fallback):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ericscheier/emburden" class="external-link">emburden</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load census tract data (tries database → CSV → automatic download)</span></span>
<span><span class="va">nc_tracts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_census_tract_data.html">load_census_tract_data</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"NC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load household cohort data by income bracket</span></span>
<span><span class="co"># Downloads automatically if not available locally!</span></span>
<span><span class="va">nc_ami</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_cohort_data.html">load_cohort_data</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="st">"ami"</span>,  <span class="co"># or "fpl"</span></span>
<span>  states <span class="op">=</span> <span class="st">"NC"</span>,</span>
<span>  income_brackets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0-30% AMI"</span>, <span class="st">"30-50% AMI"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load integrated data (burden + utility rates + emissions)</span></span>
<span><span class="va">nc_full</span> <span class="op">&lt;-</span> <span class="fu">load_burden_with_utilities</span><span class="op">(</span></span>
<span>  states <span class="op">=</span> <span class="st">"NC"</span>,</span>
<span>  dataset <span class="op">=</span> <span class="st">"ami"</span>,</span>
<span>  income_brackets <span class="op">=</span> <span class="st">"0-30% AMI"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Utility Rate Data</strong> (requires database connection):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Connect to database (if available)</span></span>
<span><span class="co"># Database integration requires separate setup - see Database Integration section</span></span>
<span><span class="co"># conn &lt;- DBI::dbConnect(RSQLite::SQLite(), "/path/to/database.sqlite")</span></span>
<span></span>
<span><span class="co"># Get utility rates for North Carolina (requires database connection)</span></span>
<span><span class="co"># nc_rates &lt;- get_utility_rates(conn, state = "NC")</span></span>
<span></span>
<span><span class="co"># Get emissions regions</span></span>
<span><span class="va">egrid</span> <span class="op">&lt;-</span> <span class="fu">get_egrid_regions</span><span class="op">(</span><span class="va">conn</span>, zips <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">27701</span>, <span class="fl">27705</span>, <span class="fl">28052</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get retail sales projections</span></span>
<span><span class="va">sales</span> <span class="op">&lt;-</span> <span class="fu">get_retail_sales_projections</span><span class="op">(</span><span class="va">conn</span>, states <span class="op">=</span> <span class="st">"NC"</span>, years <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2030</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Always disconnect when done</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-analyses">Example Analyses<a class="anchor" aria-label="anchor" href="#example-analyses"></a>
</h3>
<p>See the vignette for complete examples:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"integrating-utility-data"</span>, package <span class="op">=</span> <span class="st">"emburden"</span><span class="op">)</span></span></code></pre></div>
<p>And the example script:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"analysis/scripts/utility_rate_comparison.R"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Benefits:</strong> - <strong>Faster data access</strong> - Database queries 10-50x faster than CSV parsing - <strong>Integrated analysis</strong> - Join burden data with utility rates and emissions in single query - <strong>Flexible filtering</strong> - Query only needed states/income brackets instead of loading full CSVs - <strong>Environmental justice</strong> - Link high-burden areas with high-emissions grid regions - <strong>Policy modeling</strong> - Scenario analysis with utility rate structures and demand projections</p>
</div>
</div>
<div class="section level2">
<h2 id="related-resources">Related Resources<a class="anchor" aria-label="anchor" href="#related-resources"></a>
</h2>
<ul>
<li>
<strong>Paper</strong>: “Net energy metrics reveal striking disparities across United States household energy burdens”</li>
<li>
<strong>Data Source</strong>: DOE Low-Income Energy Affordability Data (LEAD) Tool via OpenEI</li>
<li>
<strong>Methodology</strong>: See package vignettes</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ericscheier/emburden/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ericscheier/emburden/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>AGPL (&gt;= 3) + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing emburden</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Eric Scheier <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ericscheier/emburden/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ericscheier/emburden/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Scheier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
